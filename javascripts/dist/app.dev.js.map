{"version":3,"sources":["app.js"],"names":["formId","form","document","getElementById","toJSONString","obj","elements","formReq","open","alert","i","length","element","name","value","JSON","stringify","addEventListener","event","preventDefault","json","XMLHttpRequest","console","log","status","onload","oEvent","swal","title","icon","timer","querySelector","style","display","opacity","setRequestHeader","send"],"mappings":";;AACA,IAAMA,MAAM,GAAG,cAAf;AACA,IAAMC,IAAI,GAAGC,QAAQ,CAACC,cAAT,CAAwBH,MAAxB,CAAb,C,CACA;;AACA,SAASI,YAAT,CAAsBH,IAAtB,EAA4B;AAC1B,MAAII,GAAG,GAAG,EAAV;AACA,MAAIC,QAAQ,GAAGC,OAAO,CAACC,IAAR,CAAa,MAAb,EAAqB,WAArB,EAAkC,KAAlC,CAAf;AACAC,EAAAA,KAAK,CAACH,QAAD,CAAL;;AACA,OAAK,IAAII,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGJ,QAAQ,CAACK,MAA7B,EAAqC,EAAED,CAAvC,EAA0C;AAExC,QAAIE,OAAO,GAAGN,QAAQ,CAACI,CAAD,CAAtB;AACA,QAAIG,IAAI,GAAGD,OAAO,CAACC,IAAnB;AAEA,QAAIC,KAAK,GAAGF,OAAO,CAACE,KAApB;;AACA,QAAID,IAAJ,EAAU;AACRR,MAAAA,GAAG,CAAEQ,IAAF,CAAH,GAAcC,KAAd;AACD;AACF;;AAED,SAAOC,IAAI,CAACC,SAAL,CAAeX,GAAf,CAAP;AACD;;AACD,IAAIJ,IAAJ,EAAU;AACRA,EAAAA,IAAI,CAACgB,gBAAL,CAAsB,QAAtB,EAAgC,UAAAC,KAAK,EAAI;AACvCA,IAAAA,KAAK,CAACC,cAAN,GADuC,CAEvC;;AACA,QAAMC,IAAI,GAAGhB,YAAY,CAACH,IAAD,CAAzB,CAHuC,CAIvC;;AACA,QAAMM,OAAO,GAAG,IAAIc,cAAJ,EAAhB;AACAd,IAAAA,OAAO,CAACC,IAAR,CAAa,MAAb,EAAqB,WAArB,EAAkC,IAAlC,EANuC,CAOvC;AACA;AACA;AACA;;AACAc,IAAAA,OAAO,CAACC,GAAR,CAAYhB,OAAO,CAACiB,MAApB;;AACAjB,IAAAA,OAAO,CAACkB,MAAR,GAAiB,UAASC,MAAT,EAAiB;AAChC,UAAInB,OAAO,CAACiB,MAAR,KAAmB,GAAvB,EAA4B;AAC1BG,QAAAA,IAAI,CAAC;AACHC,UAAAA,KAAK,EAAE,qBADJ;AAEHC,UAAAA,IAAI,EAAE,SAFH;AAGHC,UAAAA,KAAK,EAAE;AAHJ,SAAD,CAAJ;AAKA5B,QAAAA,QAAQ,CAAC6B,aAAT,CAAuB,aAAvB,EAAsCC,KAAtC,CAA4CC,OAA5C,GAAsD,OAAtD;AACA/B,QAAAA,QAAQ,CAAC6B,aAAT,CAAuB,sBAAvB,EAA+CC,KAA/C,CAAqDE,OAArD,GAA+D,GAA/D;AACD;;AACDzB,MAAAA,KAAK,CAACF,OAAO,CAACiB,MAAT,CAAL;;AACA,UAAIjB,OAAO,CAACiB,MAAR,KAAmB,GAAvB,EAA4B;AAC1BG,QAAAA,IAAI,CAAC;AACHC,UAAAA,KAAK,EAAE,mBADJ;AAEHC,UAAAA,IAAI,EAAE,OAFH;AAGHC,UAAAA,KAAK,EAAE;AAHJ,SAAD,CAAJ;AAKA5B,QAAAA,QAAQ,CAAC6B,aAAT,CAAuB,WAAvB,EAAoCC,KAApC,CAA0CC,OAA1C,GAAoD,OAApD;AACA/B,QAAAA,QAAQ,CAAC6B,aAAT,CAAuB,sBAAvB,EAA+CC,KAA/C,CAAqDE,OAArD,GAA+D,GAA/D;AACD;AACF,KApBD,CAZuC,CAiCvC;AACA;;;AACA3B,IAAAA,OAAO,CAAC4B,gBAAR,CAAyB,cAAzB,EAAyC,kBAAzC,EAnCuC,CAoCvC;;AACA5B,IAAAA,OAAO,CAAC6B,IAAR,CAAahB,IAAb;AACD,GAtCD;AAuCD","sourcesContent":["\nconst formId = 'telegramForm';\nconst form = document.getElementById(formId);\n//функция для захвата данных из тегов формы и синтеза JSON-обьекта \nfunction toJSONString(form) {\n  var obj = {};\n  var elements = formReq.open(\"POST\", \"/telegram\", false);\n  alert(elements)\n  for (var i = 0; i < elements.length; ++i) {\n    \n    var element = elements[i];\n    var name = element.name;\n    \n    var value = element.value;\n    if (name) {\n      obj[ name ] = value;\n    }\n  }\n \n  return JSON.stringify(obj);\n}\nif (form) {\n  form.addEventListener('submit', event => {\n    event.preventDefault();\n    //получаем данные из формы\n    const json = toJSONString(form);\n    //создаем соединение\n    const formReq = new XMLHttpRequest();\n    formReq.open('post', '/telegram', true);\n    ///////////////////////////////////\n    /////////////SweetAlert//////////\n    ///////////////////////////////////\n    //обрабатываем ответ сервера\n    console.log(formReq.status);\n    formReq.onload = function(oEvent) {\n      if (formReq.status === 200) {\n        swal({\n          title: 'Успешно отправлено!',\n          icon: 'success',\n          timer: 2000\n        })\n        document.querySelector('.sa-success').style.display = 'block';\n        document.querySelector('.sa-button-container').style.opacity = '0';\n      }\n      alert(formReq.status);\n      if (formReq.status !== 200) {\n        swal({\n          title: 'Произошла ошибка!',\n          icon: 'error',\n          timer: 2000\n        })\n        document.querySelector('.sa-error').style.display = 'block'\n        document.querySelector('.sa-button-container').style.opacity = '0'\n      }\n    }\n    ////////////////////////////\n    ////////////////////////////\n    formReq.setRequestHeader('Content-Type', 'application/json');\n    //отправляем\n    formReq.send(json)\n  })\n}"],"file":"app.dev.js"}