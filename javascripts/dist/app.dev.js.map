{"version":3,"sources":["app.js"],"names":["formId","form","document","getElementById","toJSONString","obj","elements","querySelectorAll","alert","element","i","length","name","value","JSON","stringify","addEventListener","event","preventDefault","json","formReq","XMLHttpRequest","open","console","log","onload","oEvent","status","swal","title","icon","timer","querySelector","style","display","opacity","setRequestHeader","send"],"mappings":";;AAAA,IAAMA,MAAM,GAAG,cAAf;AACA,IAAMC,IAAI,GAAGC,QAAQ,CAACC,cAAT,CAAwBH,MAAxB,CAAb,C,CACA;;AACA,SAASI,YAAT,CAAsBH,IAAtB,EAA4B;AAC1B,MAAII,GAAG,GAAG,EAAV;AACA,MAAIC,QAAQ,GAAGL,IAAI,CAACM,gBAAL,CAAsB,wBAAtB,CAAf;AACAC,EAAAA,KAAK,CAACC,OAAD,CAAL;;AACA,OAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGJ,QAAQ,CAACK,MAA7B,EAAqC,EAAED,CAAvC,EAA0C;AAExC,QAAID,OAAO,GAAGH,QAAQ,CAACI,CAAD,CAAtB;AACA,QAAIE,IAAI,GAAGH,OAAO,CAACG,IAAnB;AAEA,QAAIC,KAAK,GAAGJ,OAAO,CAACI,KAApB;;AACA,QAAID,IAAJ,EAAU;AACRP,MAAAA,GAAG,CAAEO,IAAF,CAAH,GAAcC,KAAd;AACD;AACF;;AAED,SAAOC,IAAI,CAACC,SAAL,CAAeV,GAAf,CAAP;AACD;;AACD,IAAIJ,IAAJ,EAAU;AACRA,EAAAA,IAAI,CAACe,gBAAL,CAAsB,QAAtB,EAAgC,UAAAC,KAAK,EAAI;AACvCA,IAAAA,KAAK,CAACC,cAAN,GADuC,CAEvC;;AACA,QAAMC,IAAI,GAAGf,YAAY,CAACH,IAAD,CAAzB,CAHuC,CAIvC;;AACA,QAAMmB,OAAO,GAAG,IAAIC,cAAJ,EAAhB;AACAD,IAAAA,OAAO,CAACE,IAAR,CAAa,MAAb,EAAqB,WAArB,EAAkC,IAAlC,EANuC,CAOvC;AACA;AACA;AACA;;AACAC,IAAAA,OAAO,CAACC,GAAR,CAAYJ,OAAZ;;AACAA,IAAAA,OAAO,CAACK,MAAR,GAAiB,UAASC,MAAT,EAAiB;AAChC,UAAIN,OAAO,CAACO,MAAR,KAAmB,GAAvB,EAA4B;AAC1BC,QAAAA,IAAI,CAAC;AACHC,UAAAA,KAAK,EAAE,qBADJ;AAEHC,UAAAA,IAAI,EAAE,SAFH;AAGHC,UAAAA,KAAK,EAAE;AAHJ,SAAD,CAAJ;AAKA7B,QAAAA,QAAQ,CAAC8B,aAAT,CAAuB,aAAvB,EAAsCC,KAAtC,CAA4CC,OAA5C,GAAsD,OAAtD;AACAhC,QAAAA,QAAQ,CAAC8B,aAAT,CAAuB,sBAAvB,EAA+CC,KAA/C,CAAqDE,OAArD,GAA+D,GAA/D;AACD;;AACD3B,MAAAA,KAAK,CAACY,OAAO,CAACO,MAAT,CAAL;;AACA,UAAIP,OAAO,CAACO,MAAR,KAAmB,GAAvB,EAA4B;AAC1BC,QAAAA,IAAI,CAAC;AACHC,UAAAA,KAAK,EAAE,mBADJ;AAEHC,UAAAA,IAAI,EAAE,OAFH;AAGHC,UAAAA,KAAK,EAAE;AAHJ,SAAD,CAAJ;AAKA7B,QAAAA,QAAQ,CAAC8B,aAAT,CAAuB,WAAvB,EAAoCC,KAApC,CAA0CC,OAA1C,GAAoD,OAApD;AACAhC,QAAAA,QAAQ,CAAC8B,aAAT,CAAuB,sBAAvB,EAA+CC,KAA/C,CAAqDE,OAArD,GAA+D,GAA/D;AACD;AACF,KApBD,CAZuC,CAiCvC;AACA;;;AACAf,IAAAA,OAAO,CAACgB,gBAAR,CAAyB,cAAzB,EAAyC,kBAAzC,EAnCuC,CAoCvC;;AACAhB,IAAAA,OAAO,CAACiB,IAAR,CAAalB,IAAb;AACD,GAtCD;AAuCD","sourcesContent":["const formId = 'telegramForm';\nconst form = document.getElementById(formId);\n//функция для захвата данных из тегов формы и синтеза JSON-обьекта \nfunction toJSONString(form) {\n  var obj = {};\n  var elements = form.querySelectorAll('input, input, textarea');\n  alert(element);\n  for (var i = 0; i < elements.length; ++i) {\n    \n    var element = elements[i];\n    var name = element.name;\n    \n    var value = element.value;\n    if (name) {\n      obj[ name ] = value;\n    }\n  }\n \n  return JSON.stringify(obj);\n}\nif (form) {\n  form.addEventListener('submit', event => {\n    event.preventDefault();\n    //получаем данные из формы\n    const json = toJSONString(form);\n    //создаем соединение\n    const formReq = new XMLHttpRequest();\n    formReq.open('POST', '/telegram', true);\n    ///////////////////////////////////\n    /////////////SweetAlert//////////\n    ///////////////////////////////////\n    //обрабатываем ответ сервера\n    console.log(formReq);\n    formReq.onload = function(oEvent) {\n      if (formReq.status === 200) {\n        swal({\n          title: 'Успешно отправлено!',\n          icon: 'success',\n          timer: 2000\n        })\n        document.querySelector('.sa-success').style.display = 'block';\n        document.querySelector('.sa-button-container').style.opacity = '0';\n      }\n      alert(formReq.status);\n      if (formReq.status !== 200) {\n        swal({\n          title: 'Произошла ошибка!',\n          icon: 'error',\n          timer: 2000\n        })\n        document.querySelector('.sa-error').style.display = 'block'\n        document.querySelector('.sa-button-container').style.opacity = '0'\n      }\n    }\n    ////////////////////////////\n    ////////////////////////////\n    formReq.setRequestHeader('Content-Type', 'application/json');\n    //отправляем\n    formReq.send(json);\n  })\n}"],"file":"app.dev.js"}