{"version":3,"sources":["app.js"],"names":["formId","form","document","getElementById","toJSONString","obj","elements","querySelectorAll","i","console","log","length","element","name","value","JSON","stringify","addEventListener","event","preventDefault","json","XMLHttpRequest","formReq","open","onload","oEvent","status","swal","icon","querySelector","style","display","title","opacity","timer","setRequestHeader"],"mappings":"aAAA,IAAMA,OAAS,eACTC,KAAOC,SAASC,eAAeH,QAArC,SAAUI,aAAYD,GAIpB,IADA,IAAIE,EAAM,GADZC,EAASF,EAAaH,iBAAM,2BAEtBK,EAAQ,EAAGL,EAAKM,EAAAA,SAAiBC,EAAA,CAGnCC,QAAQC,IAAIJ,EAASK,QADvB,IAAKC,EAAWJ,EAAIF,GAClBG,EAAAG,EAAYN,KACRM,EAAOA,EAAGN,MACVO,IACJR,EAAIS,GAAQF,GAGX,OAAAG,KAAAC,UAAAX,GAKDJ,MAFFA,KAAAgB,iBAAsBZ,SAAtB,SAAAa,GACDA,EAAAC,iBACGlB,IAAMmB,EAAAhB,aAAAH,MAEAkB,EAAAA,IAANE,eAKAC,EAAQC,KAAK,OAAQ,aAAa,GAElCd,QAAAC,IAAAY,GACAA,EAAAE,OAAA,SAAAC,GACA,MAAAH,EAAAI,SAIIC,KAAK,CAHTlB,MAAYa,sBAKNM,KAAM,UAJZN,MAAQE,MAEJG,SAAKE,cAAA,eAAAC,MAAAC,QAAA,QACHC,SAAOH,cAAA,wBADJC,MAAAG,QAAA,KAGHC,MAAAA,EAAOR,QAHT,MAAAJ,EAAAI,SAKAxB,KAAAA,CACAA,MAAS2B,oBACVD,KAAA,QAMGM,MAAO,MAEThC,SAAS2B,cAAc,aAAaC,MAAMC,QAAU,QANtD7B,SAAW2B,cAAY,wBAAKC,MAAAG,QAAA,MACrBX,EAALa,iBAAA,eAAA,oBAMAjC,EAAAA,KAAS2B","file":"app.min.js","sourcesContent":["const formId = 'telegramForm';\nconst form = document.getElementById(formId);\n//функция для захвата данных из тегов формы и синтеза JSON-обьекта \nfunction toJSONString(form) {\n  var obj = {};\n  var elements = form.querySelectorAll('input, select, textarea');\n  \n  for (var i = 0; i < elements.length; ++i) {\n    console.log(elements.length);\n    var element = elements[i];\n    var name = element.name;\n    var value = element.value;\n    if (name) {\n      obj[ name ] = value;\n    }\n  }\n \n  return JSON.stringify(obj);\n}\nif (form) {\n  form.addEventListener('submit', event => {\n    event.preventDefault();\n    //получаем данные из формы\n    const json = toJSONString(form);\n    //создаем соединение\n    const formReq = new XMLHttpRequest();\n    formReq.open('POST', '/telegram', true);\n    ///////////////////////////////////\n    /////////////SweetAlert//////////\n    ///////////////////////////////////\n    //обрабатываем ответ сервера\n    console.log(formReq);\n    formReq.onload = function(oEvent) {\n      if (formReq.status === 200) {\n        swal({\n          title: 'Успешно отправлено!',\n          icon: 'success',\n          timer: 2000\n        })\n        document.querySelector('.sa-success').style.display = 'block';\n        document.querySelector('.sa-button-container').style.opacity = '0';\n      }\n      alert(formReq.status);\n      if (formReq.status !== 200) {\n        swal({\n          title: 'Произошла ошибка!',\n          icon: 'error',\n          timer: 2000\n        })\n        document.querySelector('.sa-error').style.display = 'block'\n        document.querySelector('.sa-button-container').style.opacity = '0'\n      }\n    }\n    ////////////////////////////\n    ////////////////////////////\n    formReq.setRequestHeader('Content-Type', 'application/json');\n    //отправляем\n    formReq.send(json);\n  })\n}"]}