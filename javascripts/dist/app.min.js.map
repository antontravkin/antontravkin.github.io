{"version":3,"sources":["app.js"],"names":["formId","document","getElementById","toJSONString","form","obj","formReq","open","alert","elements","i","length","element","value","name","JSON","stringify","addEventListener","event","preventDefault","json","console","log","status","onload","oEvent","swal","icon","querySelector","style","display","timer","opacity","title","send"],"mappings":"aACA,IAAMA,OAAS,eAATA,KAASC,SAAAC,eAAfF,QAGA,SAASG,aAAaC,GAAtB,IAAAC,EAASF,GACHE,EAAJC,QAAAC,KAAA,OAAA,aAAA,GACAC,MAAIC,GACJD,IAAK,IAACC,EAAAA,EAANC,EAAAD,EAAAE,SAAAD,EAAA,CACA,IAAKE,EAAWF,EAAID,GAEdG,EAAOA,EAAGH,KAGVI,EAAQD,EAAQC,MAChBC,IAAJT,EAAIS,GAAMD,GAKZ,OAAOE,KAAKC,UAAUX,GACvBD,MAECA,KAAKa,iBAAiB,SAAU,SAAAC,GAD9Bd,EAAMe,iBAEND,IAAMC,EAAAA,aACNf,MACMgB,EAAOjB,IAAAA,eAGbG,EAAQC,KAAK,OAAQ,aAAa,GAIlCc,QAAAC,IAAAhB,EAAAiB,QAEAjB,EAAQkB,OAAS,SAASC,GADNF,MAApBF,EAAYf,SAGRoB,KAAK,CAFTpB,MAAQkB,sBACFlB,KAAAA,UACFoB,MAAK,MAEHC,SAAMC,cAFH,eAAAC,MAAAC,QAAA,QAGHC,SAAOH,cAAA,wBAAAC,MAAAG,QAAA,KAET/B,MAAAA,EAAS2B,QACAA,MAAT3B,EAAS2B,SACVF,KAAA,CAIGO,MAAO,oBAHXzB,KAAMF,QAKFyB,MAAO,MAHTL,SAAKE,cAAA,aAAAC,MAAAC,QAAA,QACHG,SAAOL,cAAA,wBADJC,MAAAG,QAAA,MAML/B,EAAAA,iBAAS2B,eAAc,oBAE1BtB,EACD4B,KAAAd","file":"app.min.js","sourcesContent":["\nconst formId = 'telegramForm';\nconst form = document.getElementById(formId);\n//функция для захвата данных из тегов формы и синтеза JSON-обьекта \nfunction toJSONString(form) {\n  var obj = {};\n  var elements = formReq.open(\"POST\", \"/telegram\", false);\n  alert(elements)\n  for (var i = 0; i < elements.length; ++i) {\n    \n    var element = elements[i];\n    var name = element.name;\n    \n    var value = element.value;\n    if (name) {\n      obj[ name ] = value;\n    }\n  }\n \n  return JSON.stringify(obj);\n}\nif (form) {\n  form.addEventListener('submit', event => {\n    event.preventDefault();\n    //получаем данные из формы\n    const json = toJSONString(form);\n    //создаем соединение\n    const formReq = new XMLHttpRequest();\n    formReq.open('post', '/telegram', true);\n    ///////////////////////////////////\n    /////////////SweetAlert//////////\n    ///////////////////////////////////\n    //обрабатываем ответ сервера\n    console.log(formReq.status);\n    formReq.onload = function(oEvent) {\n      if (formReq.status === 200) {\n        swal({\n          title: 'Успешно отправлено!',\n          icon: 'success',\n          timer: 2000\n        })\n        document.querySelector('.sa-success').style.display = 'block';\n        document.querySelector('.sa-button-container').style.opacity = '0';\n      }\n      alert(formReq.status);\n      if (formReq.status !== 200) {\n        swal({\n          title: 'Произошла ошибка!',\n          icon: 'error',\n          timer: 2000\n        })\n        document.querySelector('.sa-error').style.display = 'block'\n        document.querySelector('.sa-button-container').style.opacity = '0'\n      }\n    }\n    ////////////////////////////\n    ////////////////////////////\n    formReq.setRequestHeader('Content-Type', 'application/json');\n    //отправляем\n    formReq.send(json)\n  })\n}"]}